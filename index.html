<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>loading</title>
  <style>
    * { margin: 0; padding: 0 }
    html, body {
      width: 100%;
      height: 100%;
    }
    .messages-bar-dc {
      width: 100vw;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
    }
    .mask-dc {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      background-color: rgba(0,0,0, .4);
    }
    .messages-dc {
      width: 300px;
      max-height: 270px;
      padding: 15px;
      background-color: white;
      border-radius: 5px;
      position: absolute;
      top: calc(50% - 150px);
      left: calc(50% - 165px);
    }
    .title {
      font-size: 19px;
      padding-bottom: 5px;
      margin-bottom: 10px;
      border-bottom: 1px solid #ccc;
    }
    .btns {
      width: 100%;
      border-top: 1px solid #ccc;
      margin-top: 10px;
      padding-top: 10px;
      text-align: right;
    }
    .btns div {
      width: 60px;
      height: 20px;
      padding: 5px;
      display: inline-block;
      text-align: center;
      color: white;
      border-radius: 3px;
      cursor: pointer;
    }
    .btns div:hover {
      opacity: .8;
    }
    .cancel {
      background-color: #1089ff;
    }
    .confim {
      background-color: #009975;
      margin-left: 30px;
    }
  </style>
</head>
<body>
    <!-- <div class="messages-bar-dc">
      <div class="mask-dc"></div>
      <div class="messages-dc">
        <div class="title">提示</div>
        <div class="content">dasda</div>
        <div class="btns">
          <div class="cancel">取 消</div>
          <div class="confim">确 定</div>
        </div>
      </div>
    </div> -->
</body>
<script>
  /**
  * Messages - 弹窗
  * msg - 弹出的文字
  * type - 弹窗的样式
  * 
  */
  class Messages {
    constructor() {
      this.obj = null
      this.nodes = {
        bar: {
          obj: null,
          parent: null,
          style: {
            width: '100vw',
            height: '100vh',
            position: 'fixed',
            top: 0,
            left: 0
          },
          text: null
        },
        mask: {
          obj: null,
          parent: 'bar',
          style: {
            width: '100%',
            height: '100%',
            position: 'absolute',
            top: 0,
            left: 0,
            backgroundColor: 'rgba(0,0,0, .4)'
          },
          text: null
        },
        messages: {
          obj: null,
          parent: 'bar',
          style: {
            width: '300px',
            maxHeight: '270px',
            padding: '15px',
            backgroundColor: 'white',
            borderRadius: '5px',
            position: 'absolute',
            top: 'calc(50% - 150px)',
            left: 'calc(50% - 165px)'
          },
          text: null
        },
        title: {
          obj: null,
          parent: 'messages',
          style: {
            fontSize: '19px',
            paddingBottom: '5px',
            marginBottom: '10px',
            borderBottom: '1px solid #ccc'
          },
          text: '提示'
        },
        content: {
          obj: null,
          parent: 'messages',
          style: {
            fontSize: '16px',
          },
          text: null
        },
        btns: {
          obj: null,
          parent: 'messages',
          style: {
            width: '100%',
            borderTop: '1px solid #ccc',
            marginTop: '10px',
            paddingTop: '10px',
            textAlign: 'right',
          },
          text: null
        },
        cancel: {
          obj: null,
          parent: 'btns',
          style: {
            backgroundColor: '#1089ff'
          },
          text: '取 消'
        },
        confim: {
          obj: null,
          parent: 'btns',
          style: {
            backgroundColor: '#009975',
            marginLeft: '30px'
          },
          text: '确 定'
        }
      }
    }
    init(m) {
      if (typeof m === 'string') {
        this.msg(m)
      } else {
        this.confim(m)
      }
    }
    msg(m) {
      alert(m)
    }
    confim(m) {
      this.nodes['content'].text = m.msg
      for (var key in this.nodes) {
        const temp = this.nodes[key]
        const parent = temp.parent === null ? document.getElementsByTagName('body')[0] : this.nodes[temp.parent].obj
        temp.obj = this.createDom('div', temp.style, key, temp.text)
        parent.append(temp.obj)
      }
      const cancel = this.nodes['cancel'].obj
      const confim = this.nodes['confim'].obj
      cancel.addEventListener('mouseover', this.onmouseover(cancel), false)
      cancel.addEventListener('mouseleave', this.onmouseover(cancel), false)
      confim.addEventListener('mouseover', this.onmouseover(confim), false)
      confim.addEventListener('mouseleave', this.onmouseover(confim), false)
    }
    createDom(node, style = {}, className, text) { // 创建DOM以及css样式赋值
      const obj = document.createElement(node)
      for(var key in style) {
        obj.style[key] = style[key]
      }
      if (className) {
        obj.className = className
      }
      if (text) {
        obj.innerText = text
      }
      return obj
    }
    onmouseover(obj) {
      obj.style.opacity = .8
    }
    onmuseout(obj, style) {
      obj.style.opacity = 1
    }
  }

  const msg = new Messages()

  function messageShow() {
    const obj = document.getElementsByClassName('messages-bar-dc')[0]
    console.log(obj.style.display === 'none', obj.style.display)
    obj.style.display = obj.style.display === 'none' ? 'block' : 'none'
  }
</script>
</html>
